(this["webpackJsonpefficient-portfolio"]=this["webpackJsonpefficient-portfolio"]||[]).push([[0],{51:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var s=n(1),o=n(0),c=n(14),r=n.n(c),a=n(10);n(50),n(51);function i(t){if(!t)return null;try{var e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(n){return null}}function l(t,e){t||console.error("Error: Key is missing");try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(n)}}var u=n(44),j=n(26),d=n(25),h=function(t){var e=function(){fetch("https://efficient-portfolio.herokuapp.com/account/logout",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i("token")})}).then((function(t){return t.json()})).then((function(e){!0===e.isGuest&&n(),t.logout()}))},n=function(){fetch("https://efficient-portfolio.herokuapp.com/account/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i("user")})}).then((function(t){return e(),t.json()}))};return Object(s.jsxs)(j.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(s.jsx)(j.a.Brand,{href:"/",children:"Portfolio Builder"}),Object(s.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(s.jsx)(u.a,{className:"ml-auto",children:Object(s.jsxs)(d.a,{title:"Account",id:"basic-nav-dropdown",children:[Object(s.jsx)(d.a.Item,{onClick:function(){i("guest")?(l("guest",!1),n()):e()},children:"Logout"}),Object(s.jsx)(d.a.Divider,{}),Object(s.jsx)(d.a.Item,{onClick:n,children:"Delete"})]})})})]})},b=n(19),f=n(20),p=n.n(f),O=function(t){var e=function(){for(var e=[],n=0;n<t.otherAssets.length;n++)e.push(Object(s.jsx)("option",{children:t.otherAssets[n].assetClass},n));return Object(s.jsx)("select",{id:"assets",children:e})};return Object(s.jsxs)("div",{style:{width:"100%",textAlign:"right"},children:[Object(s.jsx)(e,{}),Object(s.jsx)("button",{style:{marginTop:"-20px",marginBottom:"20px",marginLeft:"4.5%",marginRight:"10.5%"},onClick:function(){!function(){var e=document.getElementById("assets").selectedIndex,n=Object(b.a)(t.assets);t.otherAssets[e]&&(n.push(t.otherAssets[e]),t.setAssets(n),t.otherAssets.splice(e,1),p.a.post("https://efficient-portfolio.herokuapp.com/account/assets",{assets:n,userId:i("user")}))}()},children:"Add"})]})},g=n(43),x=n.n(g),m=function(t){var e=Object(o.useState)([]),n=Object(a.a)(e,2),c=n[0],r=n[1],i=Object(o.useState)(),l=Object(a.a)(i,2),u=l[0],j=l[1],d={type:"scatter",data:{datasets:[{fill:!1,backgroundColor:"rgba(75,192,192,0.4)",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:1,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:1,pointRadius:1,pointHitRadius:10,data:c}]},options:{legend:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Return"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Standard Deviation"}}]},tooltips:{position:"nearest",callbacks:{afterTitle:function(e){for(var n=Object(b.a)(c[e[0].index].holdings),s=0;s<n.length;s++){var o=t.assets[s].assetClass;n[s]=o+": "+Math.round(100*n[s]*100)/100+"%"}return n}}}}};return Object(o.useEffect)((function(){fetch("/portfolio",{method:"post",body:JSON.stringify({assets:t.assets}),headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return r(t)}))}),[t.assets]),Object(o.useEffect)((function(){u&&u.destroy();var t=document.getElementById("myChart");j(new x.a(t,d))}),[c]),Object(s.jsx)("div",{id:"canvas",className:"container",children:Object(s.jsx)("canvas",{id:"myChart",width:"400",height:"200"})})},y=function(t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t.asset.assetClass}),Object(s.jsx)("td",{children:t.asset.name}),Object(s.jsx)("td",{children:t.asset.ticker}),Object(s.jsx)("td",{children:Object(s.jsx)("a",{href:"/#",onClick:function(){t.deleteAsset(t.asset._id)},children:"delete"})})]})},v=function(){var t=Object(o.useState)([]),e=Object(a.a)(t,2),n=e[0],c=e[1],r=Object(o.useState)([]),l=Object(a.a)(r,2),u=l[0],j=l[1],d=Object(o.useState)(!0),h=Object(a.a)(d,2),f=h[0],g=h[1];Object(o.useEffect)((function(){p.a.get("https://efficient-portfolio.herokuapp.com/account/info?userId="+i("user")).then((function(t){var e=t.data.assets;p.a.post("/assets/get",e).then((function(t){c(t.data.assets),j(t.data.otherAssets)})).then((function(){return g(!1)})).catch((function(t){return console.log(t)}))})).catch((function(t){console.log(t)}))}),[]);var x=function(t){for(var e=Object(b.a)(u),s=0;s<n.length;s++)if(n[s]._id===t){e.push(n[s]);break}j(e);var o=n.filter((function(e){return e._id!==t}));c(o),p.a.post("https://efficient-portfolio.herokuapp.com/account/assets",{assets:o,userId:i("user")})};return f?Object(s.jsx)("div",{}):Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Asset Class"}),Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Ticker"}),Object(s.jsx)("th",{children:"Actions"})]})}),Object(s.jsx)("tbody",{children:n.map((function(t){return Object(s.jsx)(y,{asset:t,deleteAsset:x},t._id)}))})]}),Object(s.jsx)(O,{otherAssets:u,assets:n,setAssets:c}),Object(s.jsx)(m,{assets:n})]})},k=function(t){var e=Object(o.useState)(""),n=Object(a.a)(e,2),c=n[0],r=n[1],i=Object(o.useState)(""),u=Object(a.a)(i,2),j=u[0],d=u[1],h=Object(o.useState)(!1),b=Object(a.a)(h,2),f=b[0],p=b[1],O=function(e){fetch("https://efficient-portfolio.herokuapp.com/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:j})}).then((function(t){return t.json()})).then((function(e){!0===e.success?(l("token",e.token),l("user",e.user),l("username",c),t.login()):console.log("Login failed")}))};return Object(s.jsx)("div",{children:f?Object(s.jsxs)("div",{className:"inner-login",children:[Object(s.jsx)("h1",{style:{textAlign:"center"},children:"Sign up"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"3px"},type:"text",placeholder:"Username",name:"username",value:c,onChange:function(t){return r(t.target.value)}}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},type:"password",placeholder:"Password",name:"password",value:j,onChange:function(t){return d(t.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},className:"btn btn-secondary",onClick:O,children:"Submit"}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{style:{textAlign:"center"},children:["Already have an account?",Object(s.jsx)("a",{href:"/#",onClick:function(){p(!1)},children:" Log In"})]})]}):Object(s.jsxs)("div",{className:"inner-login",children:[Object(s.jsx)("h1",{style:{textAlign:"center"},children:"Log in"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"3px"},type:"text",placeholder:"Username",name:"username",value:c,onChange:function(t){return r(t.target.value)}}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},type:"password",placeholder:"Password",name:"password",value:j,onChange:function(t){return d(t.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},className:"btn btn-secondary",onClick:O,children:"Submit"}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{style:{textAlign:"center"},children:["Don't have an account?",Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:"/#",onClick:function(){p(!0)},children:"Sign Up "})," | ",Object(s.jsx)("a",{href:"/#",onClick:function(){fetch("https://efficient-portfolio.herokuapp.com/account/guest",{method:"GET"}).then((function(t){return t.json()})).then((function(e){l("token",e.token),l("user",e.user),l("guest",!0),t.login()}))},children:"Use Demo"}),Object(s.jsx)("br",{})]})]})})},C=function(){var t=Object(o.useState)(!0),e=Object(a.a)(t,2),n=e[0],c=e[1];return Object(o.useEffect)((function(){var t=i("token");t&&fetch("https://efficient-portfolio.herokuapp.com/account/verify?token="+t,{method:"GET"}).then((function(t){return t.json()})).then((function(t){t.success&&c(!1)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)(h,{logout:function(){return c(!0)}}),Object(s.jsx)("br",{}),n?Object(s.jsx)(k,{login:function(){return c(!1)}}):Object(s.jsx)(v,{})]})};r.a.render(Object(s.jsx)(C,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.6b005ad7.chunk.js.map