(this["webpackJsonpefficient-portfolio"]=this["webpackJsonpefficient-portfolio"]||[]).push([[0],{51:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n(0),r=n(14),o=n.n(r),a=n(9);n(35),n(51);function i(e){if(!e)return null;try{var t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return null}}function u(e,t){e||console.error("Error: Key is missing");try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(n)}}var l=n(45),j=n(26),d=n(25),b=function(e){var t=function(){fetch("/account/logout",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i("token")})}).then((function(e){return e.json()})).then((function(t){!0===t.isGuest&&n(),e.logout()}))},n=function(){fetch("/account/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i("user")})}).then((function(e){return t(),e.json()}))};return Object(s.jsxs)(j.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(s.jsx)(j.a.Brand,{href:"/",children:"Portfolio Builder"}),Object(s.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(s.jsx)(l.a,{className:"ml-auto",children:Object(s.jsxs)(d.a,{title:"Account",id:"basic-nav-dropdown",children:[Object(s.jsx)(d.a.Item,{onClick:function(){i("guest")?(u("guest",!1),n()):t()},children:"Logout"}),Object(s.jsx)(d.a.Divider,{}),Object(s.jsx)(d.a.Item,{onClick:n,children:"Delete"})]})})})]})},h=n(19),f=n(20),O=n.n(f),g=function(e){var t=function(){for(var t=[],n=0;n<e.otherAssets.length;n++)t.push(Object(s.jsx)("option",{children:e.otherAssets[n].assetClass},n));return Object(s.jsx)("select",{class:"form-select",id:"assets",children:t})};return Object(s.jsxs)("div",{style:{textAlign:"center"},children:[Object(s.jsx)(t,{}),Object(s.jsx)("button",{style:{marginLeft:"10px",marginBottom:"10px"},onClick:function(){!function(){var t=document.getElementById("assets").selectedIndex,n=Object(h.a)(e.assets);e.otherAssets[t]&&(n.push(e.otherAssets[t]),e.setAssets(n),e.otherAssets.splice(t,1),O.a.post("/account/assets",{assets:n,userId:i("user")}))}()},children:"Add"})]})},p=n(44),x=n.n(p),m=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(),u=Object(a.a)(i,2),l=u[0],j=u[1],d={type:"scatter",data:{datasets:[{fill:!1,backgroundColor:"rgba(75,192,192,0.4)",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:1,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:1,pointRadius:1,pointHitRadius:10,data:r}]},options:{legend:{display:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Return"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Standard Deviation"}}]},tooltips:{position:"nearest",callbacks:{afterTitle:function(t){for(var n=Object(h.a)(r[t[0].index].holdings),s=0;s<n.length;s++){var c=e.assets[s].assetClass;n[s]=c+": "+Math.round(100*n[s]*100)/100+"%"}return n}}}}};return Object(c.useEffect)((function(){fetch("/portfolio",{method:"post",body:JSON.stringify({assets:e.assets}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[e.assets]),Object(c.useEffect)((function(){l&&l.destroy();var e=document.getElementById("myChart");j(new x.a(e,d))}),[r]),Object(s.jsx)("div",{id:"canvas",className:"container",children:Object(s.jsx)("canvas",{id:"myChart",width:"400",height:"200"})})},v=function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.asset.assetClass}),Object(s.jsx)("td",{children:e.asset.name}),Object(s.jsx)("td",{children:e.asset.ticker}),Object(s.jsx)("td",{children:Object(s.jsx)("a",{href:"/#",onClick:function(){e.deleteAsset(e.asset._id)},children:"delete"})})]})},y=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),u=Object(a.a)(o,2),l=u[0],j=u[1],d=Object(c.useState)(!0),b=Object(a.a)(d,2),f=b[0],p=b[1];Object(c.useEffect)((function(){O.a.get("/account/info?userId="+i("user")).then((function(e){var t=e.data.assets;O.a.post("/assets/get",t).then((function(e){r(e.data.assets),j(e.data.otherAssets)})).then((function(){return p(!1)})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))}),[]);var x=function(e){for(var t=Object(h.a)(l),s=0;s<n.length;s++)if(n[s]._id===e){t.push(n[s]);break}j(t);var c=n.filter((function(t){return t._id!==e}));r(c),O.a.post("/account/assets",{assets:c,userId:i("user")})};return f?Object(s.jsx)("div",{}):Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(g,{otherAssets:l,assets:n,setAssets:r}),Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Asset Class"}),Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Ticker"}),Object(s.jsx)("th",{children:"Actions"})]})}),Object(s.jsx)("tbody",{children:n.map((function(e){return Object(s.jsx)(v,{asset:e,deleteAsset:x},e._id)}))})]}),Object(s.jsx)(m,{assets:n})]})},k=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(""),l=Object(a.a)(i,2),j=l[0],d=l[1],b=Object(c.useState)(!1),h=Object(a.a)(b,2),f=h[0],O=h[1],g=Object(c.useState)(!1),p=Object(a.a)(g,2),x=p[0],m=p[1];Object(c.useEffect)((function(){f&&m(!1)}));var v=function(){fetch("/account/guest",{method:"GET"}).then((function(e){return e.json()})).then((function(t){u("token",t.token),u("user",t.user),u("guest",!0),e.login()}))};return Object(s.jsxs)("div",{className:"inner-login",children:[Object(s.jsx)("h1",{style:{textAlign:"center"},children:f?"Sign Up":"Log In"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"3px"},type:"text",placeholder:"Username",name:"username",value:r,onChange:function(e){return o(e.target.value)}}),Object(s.jsx)("input",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},type:"password",placeholder:"Password",name:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("br",{}),function(){if(x)return Object(s.jsx)("p",{style:{textAlign:"center"},children:"Login Failed"})}(),Object(s.jsx)("button",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},className:"btn btn-secondary",onClick:function(){m(!1),f?fetch("/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:j})}).then((function(e){return e.json()})).then((function(t){u("token",t.token),u("user",t.user),u("guest",!0),e.login()})):fetch("/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:j})}).then((function(e){return e.json()})).then((function(t){!0===t.success?(u("token",t.token),u("user",t.user),u("username",r),e.login()):(m(!0),console.log("Login failed"))}))},children:"Submit"}),Object(s.jsx)("br",{}),function(){var e={textAlign:"center"};return f?Object(s.jsxs)("p",{style:e,children:["Already have an account?",Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:"/#",onClick:function(){O(!1)},children:" Log In"})]}):Object(s.jsxs)("p",{style:e,children:["Don't have an account?",Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:"/#",onClick:function(){return O(!0)},children:"Sign Up "})," | ",Object(s.jsx)("a",{href:"/#",onClick:function(){return v()},children:"Use Demo"})]})}()]})},C=function(){var e=Object(c.useState)(!0),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=i("token");e&&fetch("/account/verify?token="+e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.success&&r(!1)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)(b,{logout:function(){return r(!0)}}),Object(s.jsx)("br",{}),n?Object(s.jsx)(k,{login:function(){return r(!1)}}):Object(s.jsx)(y,{})]})};o.a.render(Object(s.jsx)(C,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.628d6a4c.chunk.js.map